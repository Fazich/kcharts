/*!build time : 2014-08-01 1:03:43 AM*/
KISSY.add("kg/kcharts/2.0.0/piechart/sector",function(a,b){function c(a,b,c,d,e){Math.abs(d-e)>=360&&(e+=.01),d==e&&(e-=.1);var f,g=Math.PI/180,h=(d+e)/2,i=a+c*Math.cos(-h*g),j=a+c*Math.cos(-h*g)*.5,k=a+c*Math.cos(-d*g),l=a+c*Math.cos(-e*g),m=b+c*Math.sin(-h*g),n=b+c*Math.sin(-h*g)*.5,o=b+c*Math.sin(-d*g),p=b+c*Math.sin(-e*g),q=+(Math.abs(d-e)>180),r=1;return f=["M",a,b,"L",k,o,"A",c,c,0,q,r,l,p,"z"],f.middleangle=h,f.middlex=i,f.middley=m,f.cx=j,f.cy=n,f.A=[k,o],f.B=[l,p],f}function d(a,b,c,d,e,f){Math.abs(e-f)>=360&&(f+=.01),e==f&&(f-=.1);var g=Math.PI/180,h=(e+f)/2,i=a+d*Math.cos(-h*g),j=a+(c+.5*(d-c))*Math.cos(-h*g),k=(a+c*Math.cos(-h*g),a+c*Math.cos(-e*g)),l=a+c*Math.cos(-f*g),m=a+d*Math.cos(-e*g),n=a+d*Math.cos(-f*g),o=b+d*Math.sin(-h*g),p=b+(c+.5*(d-c))*Math.sin(-h*g),q=(b+c*Math.sin(-h*g),b+c*Math.sin(-e*g)),r=b+c*Math.sin(-f*g),s=b+d*Math.sin(-e*g),t=b+d*Math.sin(-f*g),u=["M",m,s,"L",k,q,"A",c,c,0,+(Math.abs(f-e)>180),1,l,r,"L",n,t,"A",d,d,0,+(Math.abs(f-e)>180),0,m,s];return u.middleangle=h,u.middlex=i,u.middley=o,u.cx=j,u.cy=p,u.A=[k,q],u.B=[m,s],u.C=[l,r],u.D=[n,t],u}var e,f={initializer:function(){return this.draw(),this.bindEvent(),this},bindEvent:function(){this.on("afterCxChange",function(){this.draw()}),this.on("afterCyChange",function(){this.draw()}),this.on("afterStartChange",function(){this.draw()}),this.on("afterEndChange",function(){this.draw()}),this.on("afterRChange",function(){this.draw()});var a=this.get("$path"),b=this;a.click(function(){b.fire("click")}),a.mouseout(function(){b.fire("mouseout")}),a.mouseover(function(){b.fire("mouseover")})},unbindEvent:function(){this.detach();var a=this.get("$path");a.unclick(),a.unmouseover(),a.unmouseout()},_syncAttrFromPath:function(a){this.set({middleangle:a.middleangle,sectorcx:a.cx,sectorcy:a.cy,middlex:a.middlex,middley:a.middley,centerpoint:a.cc,A:a.A,B:a.B})},draw:function(){var b=this.get("r"),c=this.get("paper"),d=this.get("pathcfg"),e=this.get("framedata"),f=e&&e.sectorcfg||{},g=c.path();d=a.merge({stroke:"#fff"},d),f&&(d=a.merge(d,{stroke:f.stroke,"stroke-width":f.strokeWidth})),g.attr(d),this.set("$path",g),a.isArray(b)&&2==b.length?this._drawDonut():this._drawSector()},_drawSector:function(){{var a,b=this.get("cx"),d=this.get("cy"),e=this.get("r"),f=this.get("start"),g=this.get("end"),h=c(b,d,e,f,g),i=h.join(",");this.get("paper")}return a=this.get("$path"),a.attr("path",i),this._syncAttrFromPath(h),this.draw=this._drawSector,this},_drawDonut:function(){var a,b=this.get("cx"),c=this.get("cy"),e=this.get("r"),f=this.get("start"),g=this.get("end");e=e.sort(function(a,b){return b>a?-1:a==b?0:1});{var h=d(b,c,e[0],e[1],f,g),i=h.join(",");this.get("paper")}return a=this.get("$path"),a.attr("path",i),this._syncAttrFromPath(h),this.draw=this._drawDonut,this},destroy:function(){this.unbindEvent(),this.get("$path").remove()}};return b.extend?e=b.extend(f):(e=function(a){this.set(a),this.userConfig=a,this.initializer()},a.extend(e,a.Base,f)),e},{requires:["base"]});