/*!build time : 2015-03-31 1:06:08 PM*/
KISSY.add("kg/kcharts/6.0.0/linechart/theme",function(a){var b="{COLOR}",c={"ks-chart-default":{title:{content:"",css:{"text-align":"center","font-size":"16px","font-weight":"bold",color:"#666"},isShow:!0},subTitle:{content:"",css:{"text-align":"center","font-size":"12px",color:"#666"},isShow:!0},points:{attr:{stroke:"#fff",r:4,"stroke-width":1.5,fill:b},hoverAttr:{stroke:"#fff",r:5,fill:b,"stroke-width":0}},xGrids:{css:{color:"#eee"}},yGrids:{css:{color:"#eee"}},yAxis:{css:{color:"#000"}},xAxis:{css:{color:"#000"}},xLabels:{css:{color:"#000","font-size":"12px"}},yLabels:{css:{color:"#000","font-size":"12px"}},pointLine:{css:{color:"#aaa"}}},"ks-chart-analytiks":{title:{content:"",css:{"text-align":"center","font-size":"16px","font-weight":"bold",color:"#666"},isShow:!0},subTitle:{content:"",css:{"text-align":"center","font-size":"12px",color:"#666"},isShow:!0},points:{attr:{type:"circle",stroke:"{COLOR}",fill:"#fff",r:4,"stroke-width":2},hoverAttr:{type:"circle",stroke:"{COLOR}",fill:"#fff",r:5,"stroke-width":2}},xGrids:{css:{color:"#eee"}},yGrids:{css:{color:"#eee"}},yAxis:{css:{color:"#ccc"}},xAxis:{css:{color:"#ccc"}},xLabels:{css:{color:"#666","font-size":"12px"}},yLabels:{css:{color:"#666","font-size":"12px"}},pointLine:{css:{color:"#ccc"}}},"ks-chart-rainbow":{title:{content:"",css:{"text-align":"center","font-size":"16px","font-weight":"bold",color:"#666"},isShow:!0},subTitle:{content:"",css:{"text-align":"center","font-size":"12px",color:"#666"},isShow:!0},points:{attr:{type:"circle",stroke:"#fff",r:4,"stroke-width":1.5,fill:b},hoverAttr:{type:"circle",stroke:"#fff",r:5,fill:b,"stroke-width":0}},xGrids:{css:{color:"#eee"}},yGrids:{css:{color:"#eee"}},yAxis:{css:{color:"#ccc"}},xAxis:{css:{color:"#ccc"}},xLabels:{css:{color:"#666","font-size":"12px"}},yLabels:{css:{color:"#666","font-size":"12px"}},pointLine:{css:{color:"#ccc"}}}};return c}),KISSY.add("kg/kcharts/6.0.0/linechart/cfg",function(a){var b="ks-chart-",c=b+"default",d="{COLOR}";return{themeCls:c,autoRender:!0,comparable:!1,lineType:"straight",colors:[],title:{content:"",css:{"text-align":"center","font-size":"16px"},isShow:!0},subTitle:{content:"",css:{"text-align":"center","font-size":"12px"},isShow:!0},points:{isShow:!0,attr:{type:"circle",stroke:"#fff",r:4,"stroke-width":1.5,fill:d},hoverAttr:{type:"circle",stroke:"#fff",r:5,fill:d,"stroke-width":0}},xLabels:{isShow:!0,css:{color:"#666","font-size":"12px","white-space":"nowrap",position:"absolute"}},yLabels:{isShow:!0,css:{color:"#666","font-size":"12px","white-space":"nowrap",position:"absolute"}},xAxis:{isShow:!0,css:{zIndex:10}},yAxis:{isShow:!0,css:{zIndex:10},num:5},xGrids:{isShow:!0,css:{}},yGrids:{isShow:!0,css:{}},areas:{isShow:!1,attr:{fill:"90-#fff-"+d,"stroke-width":0,opacity:.5}},line:{isShow:!0,attr:{"stroke-width":"3px"},hoverAttr:{"stroke-width":"4px"}},pointLine:{isShow:!1,css:{}},legend:{isShow:!1},tip:{isShow:!0,clsName:"",template:"",css:{},offset:{x:0,y:0},boundryDetect:!0}}}),KISSY.add("kg/kcharts/6.0.0/linechart/index",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){var r,s=a.all,t="ks-chart-",u=t+"evtlayout",v="{COLOR}",w=["circle","triangle","rhomb","square"],x={initializer:function(){this.init()},init:function(){var b=this;b.chartType="linechart";var c=a.clone(q);b._cfg=a.mix(c,b.userConfig,void 0,void 0,!0),h.prototype.init.call(b,b._cfg),b._cfg.autoRender&&b.render()},render:function(){var b,c,d=this,e=d._cfg,f=e.themeCls;if(d._$ctnNode[0]){h.prototype.dataFormat.call(d,d._cfg),d._lines={},d._evtEls={},d._finished=[],d._hoverstocks={},f=d._cfg.themeCls||q.themeCls,d._cfg=a.mix(a.clone(a.mix(q,l[f],void 0,void 0,!0)),d._cfg,void 0,void 0,!0),c=d.color=new i({themeCls:f}),d._cfg.colors.length>0&&c.removeAllColors();for(var k in d._cfg.colors)c.setColor(d._cfg.colors[k]);d.__cfg=d.cloneSeriesConfig(["line","points"]),points=d._points[0],b=Math.round(points&&points[0]&&points[1]&&points[1].x-points[0].x||d.getInnerContainer().width),b&&d.set("area-width",b),d.beforeRender(),d._$ctnNode.html(""),d.paper=g(d._$ctnNode[0],e.width||d._$ctnNode.width(),e.height||d._$ctnNode.height()),d.htmlPaper=new j(d._$ctnNode,{clsName:f}),h.Common.drawTitle.call(null,this,f),h.Common.drawSubTitle.call(null,this,f),d.renderTip(),h.Common.drawGridsX.call(null,this),h.Common.drawGridsY.call(null,this),d.drawPointLine(),h.Common.drawAxisX.call(null,this),h.Common.drawAxisY.call(null,this),h.Common.drawLabelsX.call(null,this),h.Common.drawLabelsY.call(null,this),d.drawLines(function(){d.__drawHoverStocks(),d.renderEvtLayout(),d.bindEvt(),d.renderLegend(),d.afterRender()}),a.log(d)}},cloneSeriesConfig:function(b){var c,d=this,e={},f=a.clone(d._cfg);if(b){for(var g in b)for(var h in d._cfg.series)c=d._cfg.series[h][b[g]]?a.mix(f[b[g]],d._cfg.series[h][b[g]],void 0,void 0,!0):d._cfg[b[g]],c&&(e[b[g]]||(e[b[g]]=[]),e[b[g]][h]=c);return e}},drawLine:function(a){var b=this,c=b._points[a];if(c&&c.length){b.drawArea(a);var d=h.Common.getLinePath.call(null,b,c),e=b.paper,f=b.color.getColor(a).DEFAULT,g=b.__cfg.line[a].attr,i=e.path(d).attr(g).attr({stroke:f});return b._stocks[a].stocks=b.drawStocks(a,b.processAttr(b._cfg.points.attr,f)),b._finished.push(!0),i}},drawArea:function(a){if(this._cfg.areas.isShow){var b=this,c=b._points[a];if(c&&c.length){var d=b.getAreaPath(c),e=b.paper,f=b.color.getColor(a).DEFAULT,g=b._cfg.areas.attr;b._areas[a]={0:e.path(d).attr(b.processAttr(g,f)),attr:g,path:d}}}},getAreaPath:function(a){var b=this,c=h.Common.getLinePath.call(null,b,a),d=b.getInnerContainer(),e=g.pathBBox(c),f=[c," L",e.x2,",",d.br.y," ",e.x,",",d.bl.y," z"].join("");return f},getFirstUnEmptyPointIndex:function(a){var b=this,c=b._points[a];for(var d in c)if(!b.isEmptyPoint(c[d]))return d},animateLine:function(a,b){var c,d,e,f,i=this,j=0,k=0,l=[],m=i._cfg,n=i.color,p=i.paper,q=i._points[a],r=h.Common.getLinePath.call(null,i,q),s=g.getTotalLength(r),t=m.anim?m.anim.duration||500:500,u="easeNone",v=i.get("area-width"),w=i.__cfg.line[a].attr,x=p.path(c).attr(w).attr({stroke:n.getColor(a).DEFAULT});for(var y in i._points[a])l[y]="";f=i.getFirstUnEmptyPointIndex(a),l[f]=i.drawStock(a,f);new o({},{},{duration:t,easing:u,frame:function(){d=arguments[1]*s,c=g.getSubpath(r,k,d),e=g.pathBBox(c),j=Math.floor(1.01*e.width/v)- -f,!l[j]&&q[j]&&(l[j]=i.drawStock(a,j));for(var b in q)j>b&&!l[b]&&(l[b]=i.drawStock(a,b));x&&x.attr({path:c})},endframe:function(){i._stocks[a].stocks=l,i._finished.push(!0),i._finished.length==m.series.length&&b&&b(),i.__drawHoverStocks(a)}});return x},__drawHoverStocks:function(){var a=this;for(var b in a._stocks)a.removeHoverStock(b),a._hoverstocks[b]=a.drawStock(b,a.getFirstUnEmptyPointIndex(b),{x:0,y:0}).attr(a._stocks[b].hoverAttr).hide()},removeHoverStock:function(a){var b=this;b._hoverstocks[a]&&b._hoverstocks[a].remove&&b._hoverstocks[a].remove(),delete b._hoverstocks[a]},drawLines:function(b){var c=this,d=c._cfg,e=w.length;c._lines={},c._stocks={};for(var f in c._points){var g,i=h.Common.getLinePath.call(null,c,c._points[f]),j=c.color.getColor(f),k=c.processAttr(c._cfg.points.attr,j.DEFAULT),l=c.processAttr(c._cfg.points.hoverAttr,j.HOVER);c._stocks[f]={points:c._points[f],color:j,attr:k,hoverAttr:l,type:"auto"==k.type?w[f%e]:k.type},g=d.anim?c.animateLine(f,b):c.drawLine(f),c._lines[f]={line:g,path:i,points:c._points[f],color:j,attr:a.mix({stroke:j.DEFAULT},c._cfg.line.attr),isShow:!0},c._finished.length==d.series.length&&b&&b()}return c._lines},processAttr:function(b,c){var d=a.clone(b);for(var e in d)d[e]&&"string"==typeof d[e]&&(d[e]=d[e].replace(v,c));return d},drawStocks:function(a,b){var c=this,d=[];for(var e in c._points[a])d.push(c.drawStock(a,e));return d},drawStock:function(b,c,d){if(this._cfg.points.isShow||void 0!==d){var e,f=this,g=f._cfg,h=f.paper,i=f.color,j=i.getColor(b).DEFAULT,k=f.processAttr(g.points.attr,j),l=f._stocks[b].type,m=f._points[b][c],n=g.points.template,d=d||{},o=void 0!==d.x?d.x:m.x,q=void 0!==d.y?d.y:m.y,r=k.r;if(void 0!==o&&void 0!==q){if(a.isFunction(n))return n({paper:h,lineIndex:b,stockIndex:c,attr:k,color:j,graphTool:p,x:o,y:q});switch(l){case"triangle":e=p.triangle(h,o,q,1.4*r);break;case"rhomb":e=p.rhomb(h,o,q,2.4*r,2.4*r);break;case"square":e=p.rhomb(h,o,q,2.4*r,2.4*r,45);break;default:e=h.circle(o,q,r,k)}return e.attr(k).attr({cx:o,cy:q}),e}}},drawPointLine:function(){if(this._cfg.comparable){var a=this,b=a.htmlPaper,c=a._cfg.themeCls+"-pointline",d=a._innerContainer;return a._pointline=b.lineY(0,d.tl.y,d.height).addClass(c).css(a._cfg.pointLine.css).css({display:"none"}),a._pointline}},renderTip:function(){if(this._cfg.tip.isShow){var b=this,c=b._cfg,d=b._innerContainer,e=c.tip.boundryDetect?{x:d.tl.x,y:d.tl.y,width:d.width,height:d.height}:{},f=a.mix(c.tip,{rootNode:b._$ctnNode,clsName:c.themeCls,boundry:e},void 0,void 0,!0);return b.tip=new n(f),b.tip}},renderEvtLayout:function(){var a,b=this,c=b._innerContainer,d=(c.tl.y,b._points[0]),e=d&&d[0]&&d[1]&&d[1].x-d[0].x||c.width,f=c.height,g=b._evtEls._areas=[],h=b._evtEls._rects=[];a=b._evtEls.paper?b._evtEls.paper:b._evtEls.paper=new j(b._$ctnNode,{clsName:u,prependTo:!1,width:c.width,height:f,left:c.tl.x,top:c.tl.y,css:{"z-index":20,background:"#fff",filter:"alpha(opacity =1)","-moz-opacity":.01,"-khtml-opacity":.01,opacity:.01}});for(var i=0,k=d.length;k>i;i++)g[i]={x:d[i].x-e/2,y:c.tl.y,width:e,height:f};for(var i in b._stocks){var l=b._stocks[i],m=[],d=l.points;for(var n in d)m[n]={x:d[n].x-e/2,y:d[n].y-5,width:e,height:10};h[i]=m}},clearEvtLayout:function(){var a=this;a._evtEls._areas&&a._evtEls._areas.length&&(a._evtEls._areas=[]),a._evtEls._rects&&a._evtEls._rects.length&&(a._evtEls._rects=[])},renderLegend:function(){if(this._cfg.legend.isShow){var b=this,c=b._cfg.legend,d=c.container&&s(c.container)[0]?s(c.container):b._$ctnNode,e=b._stocks,f=b._innerContainer,g=b.color._colors,h=g.length,i=b._cfg,j=b._cfg.series,l=a.map(j,function(a,b){b%=h;var c={},d=g[b];c.text=a.text,c.DEFAULT=d.DEFAULT,c.HOVER=d.HOVER;var f=e[b].type;return c.icontype="line"+f,c.iconsize=[1,1],c}),m=a.merge({interval:20,iconright:5,showicon:!0},i.legend.globalConfig);return b.legend=new k({container:d,paper:b.paper,bbox:{width:f.width,height:f.height,left:f.x,top:f.y},align:i.legend.align||"bc",offset:i.legend.offset||[0,30],globalConfig:m,config:l}),b.legend.on("click",function(a){var b=a.index,c=(a.text,a.icon,a.el);1!=c.hide?(this.hideLine(b),c.hide=1,c.disable()):(this.showLine(b),c.hide=0,c.enable())},this),b.legend}},bindEvt:function(){{var a=this,b=(a._cfg,a._evtEls);a.curStockIndex=function(){for(var b in a._stocks)if(a._stocks[b].stocks)return b}()}a.curLineIndex=a.getFirstVisibleLineIndex(),e.detach(b.paper.$paper,"mouseleave"),e.on(b.paper.$paper,"mouseleave",function(b){a._lines[0].line.attr(a._lines[0].attr),a.tip&&a.tip.hide(),a._pointline&&a._pointline.hide();for(var c in a._hoverstocks)a._hoverstocks[c].hide();a.curStockIndex=void 0,a.paperLeave()}),e.detach(b.paper.$paper,"mousemove"),e.on(b.paper.$paper,"mousemove",function(b){b=a.getOffset(b),a.delegateMouseMove(b)}),e.detach(b.paper.$paper,"click"),e.on(b.paper.$paper,"click",function(b){b=a.getOffset(b),a.delegateClick(b)})},delegateClick:function(a){var b=this,c=b.getInnerContainer();for(var d in b._evtEls._rects)for(var e in b._evtEls._rects[d]){var f=b._evtEls._rects[d][e];if(b.isInSide(a.offsetX+c.x,a.offsetY+c.y,f.x,f.y,f.width,f.height))return void b.stockClick(d,e)}},delegateMouseMove:function(a){var b=this,c=b.getInnerContainer(),d=b.curStockIndex;for(var e in b._evtEls._areas){var f=b._evtEls._areas[e];if(b.isInSide(a.offsetX+c.x,a.offsetY+c.y,f.x,f.y,f.width,f.height)&&(void 0===d||d!=e))return b.curStockIndex=e,void b.tipHandler(b.curLineIndex,b.curStockIndex)}for(var e in b._evtEls._rects)for(var g in b._evtEls._rects[e]){var h=b._evtEls._rects[e][g];if(b.isInSide(a.offsetX+c.x,a.offsetY+c.y,h.x,h.y,h.width,h.height)){if(b.curLineIndex===e)return;return b.lineChangeTo(e),void b.tipHandler(b.curLineIndex,b.curStockIndex)}}},lineChangeTo:function(a){var b=this,c=(b._cfg,b.__cfg.line[a].hoverAttr);if(!b._isAnimating&&b._lines[a].isShow){for(var d in b._stocks)b._stocks[d].points=b._points[d];for(var d in b._lines)d!=a&&b._lines[d].line&&b._lines[d].line.attr(b.__cfg.line[d].attr);b.removeLine(a),b._lines[a].line=b.drawLine(a).attr(c),b.__drawHoverStocks(),b.curLineIndex=a}},tipHandler:function(b,c){var d=this;if(void 0!==b&&void 0!==c){var e,f=d.tip,g=d._cfg,i=g.series,j=g.tip.template,k=d._points[b],l=(d._stocks[b],k[c]),m=d._lines[b].color.DEFAULT;if(j&&g.tip.isShow&&void 0!==d.curStockIndex){if(d._cfg.comparable){var n={datas:{}},o=[];for(var p in d._points)if(d._stocks[p].stocks&&d._points[p][c].dataInfo){d._points[p][c].dataInfo.color=d._stocks[p].color.DEFAULT;var q=a.merge(d._points[p][c].dataInfo,i[p]);delete q.data,n.datas[p]=q}for(var p in n.datas)o.push(n.datas[p]);n.datas=h.prototype.arraySort(o,!0,"y"),e=n}else e=a.merge(d._points[b][c].dataInfo,i[b]),delete e.data;d.stockChange(b,c),d.isEmptyPoint(k[c])||(e.lineindex=b,e.pointindex=c,f.fire("setcontent",{data:e}),f.fire("move",{x:l.x,y:l.y,style:d.processAttr(g.tip.css,m)}))}}},stockChange:function(b,c){var d=this,e=d._points[b],f=d._stocks[b],g=f.stocks&&f.stocks[c];if(e&&!d.isEmptyPoint(e[c])&&d._lines[b].isShow)if(d._pointline&&d._pointline.css({left:d._pointsX[c].x}).show(),d._cfg.comparable)for(var h in d._hoverstocks){var i=d._points[h][c];d._lines[h].isShow&&d._hoverstocks[h].transform(["T",i.x,",",i.y].join("")).show()}else{var i=e[c];d._lines[b].isShow&&d._hoverstocks[b].transform(["T",i.x,",",i.y].join("")).show()}else{var j=d.getFirstNotEmptyPointsLineIndex(c);j&&d.lineChangeTo(j)}if(d._points[b][c].dataInfo&&d._lines[b].isShow){var k=a.mix({target:g,currentTarget:g,lineIndex:Math.round(b),stockIndex:Math.round(c)},f.points[c]);d.fire("stockChange",k)}},getFirstNotEmptyPointsLineIndex:function(a){var b=this;for(var c in b._points)if(!b.isEmptyPoint(b._points[c][a])&&b._lines[c].isShow)return c+"";return""},getFirstVisibleLineIndex:function(){var a=this;for(var b in a._lines)if(a._lines[b].isShow)return b},isEmptyPoint:function(a){return a&&a.dataInfo?!1:!0},removeArea:function(a){this._areas&&this._areas[a]&&(this._areas[a].remove&&this._areas[a].remove(),delete this._areas[a])},removeStock:function(a){var b=this;for(var c in b._stocks[a].stocks)b._stocks[a].stocks[c]&&b._stocks[a].stocks[c].remove();delete b._stocks[a].stocks},transformLine:function(a){var b=this,c=500,d=h.Common.getLinePath.call(null,b,b._points[a]),e=b._lines[a].path;e!=d&&""!=d&&(b._isAnimating=!0,b.__transformArea(a,c),b.__transformStock(a,c),b.__transformLine(a,{path:d},c,function(){b._isAnimating=!1}))},__transformArea:function(a,b,c){var d=this,e=d._areas[a],f=d.getAreaPath(d._points[a]);e&&(e[0]&&e[0].stop()&&e[0].animate({path:f},b,c),e.path=f)},__transformLine:function(a,b,c,d){var e=this,f=e._lines[a];f.line&&f.line.stop()&&f.line.animate(b,c,d),f.path=b.path},__transformStock:function(a,b){var c,d=this,e=d._stocks[a];for(var f in e.stocks)e.stocks[f]&&(c=e.stocks[f],c.stop().animate({transform:"T"+(e.points[f].x-e.stocks[f].attr("cx"))+","+(e.points[f].y-e.stocks[f].attr("cy"))},b))},removeLine:function(a){var b=this;b._lines[a].line.remove(),b._areas[a]&&b._areas[a][0]&&b._areas[a][0].remove&&b._areas[a][0].remove();for(var c in b._stocks)a==c&&(b.removeStock(a),b.removeArea(a),b.removeHoverStock(a)),b._stocks[c].points=b._points[c]},hideLine:function(b){var c=this;if(c._lines[b].isShow){c._lines[b].isShow=!1,b==c.curLineIndex&&(c.curLineIndex=c.getFirstVisibleLineIndex()),h.prototype.removeData.call(c,b),h.Common.animateGridsAndLabels.call(null,c),c.removeLine(b);for(var d in c._lines)d!=b&&c.transformLine(d);c.clearEvtLayout(),c.renderEvtLayout(),c.bindEvt(),a.log(c)}},showLine:function(a){var b=this;if(!b._lines[a].isShow){b._lines[a].isShow=!0,b._cfg.series[a].isShow=!0,h.prototype.recoveryData.call(b,a),h.Common.animateGridsAndLabels.call(null,b),b._lines[a].line=b.drawLine(a),b.__drawHoverStocks();for(var c in b._stocks)b._stocks[c].points=b._points[c];for(var c in b._lines)b.transformLine(c);b.clearEvtLayout(),b.renderEvtLayout(),b.bindEvt()}},paperLeave:function(){var a=this;a.fire("paperLeave",a)},stockClick:function(b,c){var d=this,e=d._stocks[b],f=e.stocks&&e.stocks[c],g=a.mix({target:f,currentTarget:f,lineIndex:Math.round(b),stockIndex:Math.round(c)},e.points[c]);d.fire("stockClick",g)},beforeRender:function(){var a=this;a.fire("beforeRender",a)},afterRender:function(){var a=this;a.fire("afterRender",a)},getHtmlPaper:function(){return this.htmlPaper},getRaphaelPaper:function(){return this.paper},clear:function(){this._$ctnNode.html("")}};return b.extend?r=h.extend(x):(r=function(a){var b=this;b.userConfig=a,b.init()},a.extend(r,h,x)),r},{requires:["base","node","dom","event","gallery/template/1.0/index","kg/kcharts/6.0.0/raphael/index","kg/kcharts/6.0.0/basechart/index","kg/kcharts/6.0.0/tools/color/index","kg/kcharts/6.0.0/tools/htmlpaper/index","kg/kcharts/6.0.0/legend/index","./theme","kg/kcharts/6.0.0/tools/touch/index","kg/kcharts/6.0.0/tip/index","kg/kcharts/6.0.0/animate/index","kg/kcharts/6.0.0/tools/graphtool/index","./cfg"]});