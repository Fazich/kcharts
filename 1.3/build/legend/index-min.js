<<<<<<< HEAD
/*! kcharts - v1.3 - 2014-01-06 9:55:15 AM
* Copyright (c) 2014 数据可视化小组; Licensed  */
KISSY.add("gallery/kcharts/1.3/legend/index",function(t,e,i,n,r,a,s){function o(e){f||(f=t.Node("<div/>").css({visibility:"hidden",position:"fixed",left:"-9999em",top:0}).appendTo(x)),n.append(e,f);var i={width:n.outerWidth(f),height:n.outerHeight(f)};return f.html(""),i}function c(t,e){var i=this.el,n=i.icon,r=i.des;"cy"===t?n.transform("t0,"+e):"top"===t&&r.css("top",e+"px")}function l(t,e){var i=this.el,n=i.icon,r=i.des;"cx"===t?n.transform("t"+e+",0"):"left"===t&&r.css(t,e+"px")}function h(e){var i=e.get("disablestyle"),n={icon:{stroke:"#ccc",fill:"#ccc"},text:{color:"#ccc"}};n=t.isFunction(i)?t.mix(n,i(this,this.index)):t.mix(n,i);var r=this.icon,a=this.des;r.attr(n.icon),a.css(n.text)}function d(e,i){var n=e.get("enablestyle"),r={icon:{stroke:i.DEFAULT,fill:i.DEFAULT},text:{color:i.DEFAULT}};r=t.isFunction(n)?t.mix(r,n(this,this.index)):t.mix(r,n);var a=this.icon,s=this.des;a.attr(r.icon),s.css(r.text)}t.merge;var f,p,g=a.BASIC[1],u=window,_=u.Raphael,x=t.one(document.body),v={offset:[0,0],globalConfig:{interval:5}},m={initializer:function(){this._setupPaper(),this._setupCon();var e=(this.get("bbox"),this.get("paper"),this.get("align")),i=this.get("iconfn");i&&t.isFunction(i)&&(this.icon=i),this.align(e)},_setupPaper:function(){var t=this.get("paper");if(!t){var e=this.get("container");t=_(e[0],n.width(e),n.height(e)),this.set("paper",t)}"VML"==_.type||(t.canvas.style.zIndex=10)},bindEvent:function(){var e=this.get("els"),i=this;t.each(e,function(e){var n=e.icon,r=e.des,a={icon:n,text:r,index:e.index,el:e};t.each(["click","mouseover","mouseout"],function(t){n[t](function(){i.fire(t,a)}),r.on(t,function(){i.fire(t,a)})})})},unbindEvent:function(){var e=this.get("els");t.each(e,function(e){var i=e.icon,n=e.des;t.each(["click","mouseover","mouseout"],function(t){i["un"+t](),n.detach(t)})})},remmoveLegendIconAndText:function(){var e=this.get("els");t.each(e,function(t){var e=t.icon,i=t.des;e.remove(),i.remove()})},onframeend:function(){this.bindEvent()},_setupCon:function(){var t=this.get("container"),e=n.css(t,"position");"static"==e&&n.css(t,"position","relative")},item:function(t){var e=this.get("els");return e[t]},icon:function(t,e,i,n){var r,s=this.get("paper"),o=i;switch(n){case"triangle":r=a.triangle(t,e,{paper:s,size:o});break;case"linetriangle":r=a.linetriangle(t,e,{paper:s,size:o});break;case"rhomb":case"diamon":r=a.diamond(t,e,{paper:s,size:o});break;case"linerhomb":case"linediamond":r=a.linediamond(t,e,{paper:s,size:o});break;case"square":r=a.square(t,e,{paper:s,size:o});break;case"linesquare":r=a.linesquare(t,e,{paper:s,size:o});break;case"linecircle":r=a.linecircle(t,e,{paper:s,size:o});break;default:r=a.circle(t,e,{paper:s,size:o})}return r},align:function(t){var e={tl:"alignTopLeft",tc:"alignTopCenter",tr:"alignTopRight",rt:"alignRightTop",rm:"alignRightMiddle",rb:"alignRightBottom",bl:"alignBottomLeft",bc:"alignBottomCenter",br:"alignBottomRight",lt:"alignLeftTop",lm:"alignLeftMiddle",lb:"alignLeftBottom"},i=e[t]||"alignRight";this[i]()},alignTop:function(e,i){var r=this.get("container"),a=this.get("bbox"),c=this.get("offset"),f=(this.get("paper"),this.get("config")),p=this.get("globalConfig"),u=this,_=p.iconsize||[1,1],x=_*g||6,v=p.icontype,m=0,y=[];t.each(f,function(e,i){var n=e.text||"data"+i,r=t.Node('<span class="kcharts-legend-item">'+n+"</span>"),a=o(r);m+=a.width,y.push({el:r,width:a.width,height:a.height,zIndex:10,cursor:"pointer"})});var b=m,w=u.icon(-9999,9999,_,v),L=w.getBBox(),A=p.iconright||0,k=p.interval||0;w.remove(),b+=(L.width+A)*f.length+k*(f.length-1);var C=a.left+c[0],S=a.top+c[1]-2*x,T=C+(a.width-b)/2+x,E=S;if(i&&(E=E+4*x+a.height),"l"==e)T=0+c[0]+x;else if("r"==e){var Y=n.width(r);T=Y-b}var X=[],P=this.get("alignhook"),z=this.get("iconAttrHook"),I=this.get("spanAttrHook"),N=[],G=this.get("anim"),R=G?n.width(r):0,F={icontype:v,iconsize:x,iconright:A};t.each(f,function(e,i){P&&(F=P.call(u,F,i));var a=T,s=E;a+=R;var c=u.icon(a,s,_,e.icontype||F.icontype),f=c.getBBox(),p={};t.mix(p,e,!0,["DEFAULT","HOVER"]);var g={fill:p.DEFAULT};z&&(g=t.merge({fill:p.DEFAULT},z.call(u,i))),g.stroke=g.fill,c.attr(g);var x=e.text||"data"+i,v=n.create('<span class="kcharts-legend-item"></span>');n.html(v,x);var m,y,b=o(v);v=t.Node('<span class="kcharts-legend-item">'+x+"</span>"),m=T+F.iconsize+F.iconright,y=E-(f.height/2+(b.height-f.height)/2),m+=R;var w={left:m+"px",top:y+"px",position:"absolute",zIndex:10,cursor:"pointer"};p.DEFAULT&&(w.color=p.DEFAULT),I&&(w=t.merge(w,I.call(u,i))),v.css(w),v.appendTo(r),T+=b.width+2*F.iconsize+k+F.iconright;var L={icon:c,des:v,index:i,disable:function(){h.call(L,u,e)},enable:function(){d.call(L,u,e)}};X.push(L),G&&N.push({el:L,frame:l,from:{cx:0,left:m},to:{cx:-R,left:m-R}})}),this.set("els",X),G?(G.endframe=function(){u.onframeend()},s.AnimateObject(N,G)):u.onframeend()},alignTopLeft:function(){this.alignTop("l")},alignTopCenter:function(){this.alignTop("c")},alignTopRight:function(){this.alignTop("r")},alignRight:function(t){this.alignLeft(t,!0)},alignRightTop:function(){this.alignRight("t")},alignRightMiddle:function(){this.alignRight("m")},alignRightBottom:function(){this.alignRight("b")},alignBottomLeft:function(){this.alignTop("l",!0)},alignBottomCenter:function(){this.alignTop("c",!0)},alignBottomRight:function(){this.alignTop("r",!0)},alignLeft:function(e,i){var r=this.get("container"),a=this.get("bbox"),l=this.get("offset"),f=(this.get("paper"),this.get("config")),p=this.get("globalConfig"),u=this,_=p.iconsize||[1,1],x=_*g||6,v=p.icontype,m=0,y=f[0],b=u.icon(-9999,-9999,_,v),w=b.getBBox(),L=f.length,A=p.iconright||0,k=p.interval;b.remove();var C=y.text||"data",S=t.Node('<span class="kcharts-legend-item">'+C+"</span>"),T=o(S),E=Math.max(T.height,w.height);m+=E*L+k*(L-1);var Y,X,P,z,I=0,N=[];t.each(f,function(e,i){var n=t.Node('<span class="kcharts-legend-item">'+e.text+"</span>"),r=o(n);e.text||"data"+i,r.width>I&&(I=r.width),N.push({el:n,width:r.width,height:r.height})}),I+=A,i?(Y=a.left+a.width+l[0],X=a.top+l[1],P=Y+x,z=X):(Y=a.left+l[0],X=a.top+l[1],P=Y,z=X),"m"==e?z=a.top+(a.height-m)/2:"b"==e&&(z=a.top+a.height-m);var G=[],R=this.get("alignhook"),F=this.get("iconAttrHook"),D=this.get("spanAttrHook"),M=[],B=this.get("anim"),$=B?n.height(r):0,O={icontype:v,iconright:A};t.each(f,function(e,n){R&&(O=R.call(u,O,n));var a,s;i?(a=P+l[0],s=z+l[1]):(a=P-I-x+l[0],s=z+l[1]),s+=$;var o=u.icon(a,s,_,e.icontype||O.icontype),f=o.getBBox(),p=N[n],g={};t.mix(g,e,!0,["DEFAULT","HOVER"]);var v={fill:g.DEFAULT};F&&(v=t.merge(v,F.call(u,n))),v.stroke=v.fill,o.attr(v);var m,y,b=t.Node('<span class="kcharts-legend-item">'+e.text+"</span>");i?(m=P+x+f.width+l[0],y=z-(f.height/2+(T.height-f.height)/2)+l[1]):(m=P+l[0]-I+O.iconright,y=z-(f.height/2+(p.height-f.height)/2)+l[1]),y+=$;var w={left:m+"px",top:y+"px",position:"absolute",zIndex:10,cursor:"pointer"};g.DEFAULT&&(w.color=g.DEFAULT),D&&(w=t.merge(w,D.call(u,n))),b.css(w),b.appendTo(r);var L=Math.max(p.height,f.height);z+=L+k;var A={icon:o,des:b,index:n,disable:function(){h.call(A,u,e)},enable:function(){d.call(A,u,e)}};G.push(A),B&&M.push({el:A,frame:c,from:{cy:0,top:y},to:{cy:-$,top:y-$}})}),this.set("els",G),B?(B.endframe=function(){u.onframeend()},s.AnimateObject(M,B)):u.onframeend()},alignLeftTop:function(){this.alignLeft("t")},alignLeftMiddle:function(){this.alignLeft("m")},alignLeftBottom:function(){this.alignLeft("b")},destroy:function(){this.unbindEvent(),this.remmoveLegendIconAndText()}};return e.extend?p=e.extend(m):(p=function(e){e=t.merge(v,e),this.set(e),this.initializer()},t.extend(p,e,m)),p},{requires:["base","node","dom","event","gallery/kcharts/1.3/icons/index","gallery/kcharts/1.3/animate/index","gallery/kcharts/1.3/raphael/index"]});
=======
/*! kcharts - v1.3 - 2014-01-04 9:39:16 PM
* Copyright (c) 2014 数据可视化小组; Licensed  */
KISSY.add("gallery/kcharts/1.3/legend/index",function(t,e,i,n,r,a,o){function s(e){d||(d=t.Node("<div/>").css({visibility:"hidden",position:"fixed",left:"-9999em",top:0}).appendTo(x)),n.append(e,d);var i={width:n.outerWidth(d),height:n.outerHeight(d)};return d.html(""),i}function c(t,e){var i=this.el,n=i.icon,r=i.des;"cy"===t?n.transform("t0,"+e):"top"===t&&r.css("top",e+"px")}function l(t,e){var i=this.el,n=i.icon,r=i.des;"cx"===t?n.transform("t"+e+",0"):"left"===t&&r.css(t,e+"px")}function h(e){var i=e.get("disablestyle"),n={icon:{stroke:"#ccc",fill:"#ccc"},text:{color:"#ccc"}};n=t.isFunction(i)?t.mix(n,i(this,this.index)):t.mix(n,i);var r=this.icon,a=this.des;r.attr(n.icon),a.css(n.text)}function f(e,i){var n=e.get("enablestyle"),r={icon:{stroke:i.DEFAULT,fill:i.DEFAULT},text:{color:i.DEFAULT}};r=t.isFunction(n)?t.mix(r,n(this,this.index)):t.mix(r,n);var a=this.icon,o=this.des;a.attr(r.icon),o.css(r.text)}t.merge;var d,p,g=a.BASIC[1],u=window,_=u.Raphael,x=t.one(document.body),m={offset:[0,0],globalConfig:{interval:5}},v={initializer:function(){this._setupPaper(),this._setupCon();var e=(this.get("bbox"),this.get("paper"),this.get("align")),i=this.get("iconfn");i&&t.isFunction(i)&&(this.icon=i),this.align(e)},_setupPaper:function(){var t=this.get("paper");if(!t){var e=this.get("container");t=_(e[0],n.width(e),n.height(e)),this.set("paper",t)}"VML"==_.type||(t.canvas.style.zIndex=10)},bindEvent:function(){var e=this.get("els"),i=this;t.each(e,function(e){var n=e.icon,r=e.des,a={icon:n,text:r,index:e.index,el:e};t.each(["click","mouseover","mouseout"],function(t){n[t](function(){i.fire(t,a)}),r.on(t,function(){i.fire(t,a)})})})},onframeend:function(){this.bindEvent()},_setupCon:function(){var t=this.get("container"),e=n.css(t,"position");"static"==e&&n.css(t,"position","relative")},item:function(t){var e=this.get("els");return e[t]},icon:function(t,e,i,n){var r,o=this.get("paper"),s=i;switch(n){case"triangle":r=a.triangle(t,e,{paper:o,size:s});break;case"linetriangle":r=a.linetriangle(t,e,{paper:o,size:s});break;case"rhomb":case"diamon":r=a.diamond(t,e,{paper:o,size:s});break;case"linerhomb":case"linediamond":r=a.linediamond(t,e,{paper:o,size:s});break;case"square":r=a.square(t,e,{paper:o,size:s});break;case"linesquare":r=a.linesquare(t,e,{paper:o,size:s});break;case"linecircle":r=a.linecircle(t,e,{paper:o,size:s});break;default:r=a.circle(t,e,{paper:o,size:s})}return r},align:function(t){var e={tl:"alignTopLeft",tc:"alignTopCenter",tr:"alignTopRight",rt:"alignRightTop",rm:"alignRightMiddle",rb:"alignRightBottom",bl:"alignBottomLeft",bc:"alignBottomCenter",br:"alignBottomRight",lt:"alignLeftTop",lm:"alignLeftMiddle",lb:"alignLeftBottom"},i=e[t]||"alignRight";this[i]()},alignTop:function(e,i){var r=this.get("container"),a=this.get("bbox"),c=this.get("offset"),d=(this.get("paper"),this.get("config")),p=this.get("globalConfig"),u=this,_=p.iconsize||[1,1],x=_*g||6,m=p.icontype,v=0,y=[];t.each(d,function(e,i){var n=e.text||"data"+i,r=t.Node('<span class="kcharts-legend-item">'+n+"</span>"),a=s(r);v+=a.width,y.push({el:r,width:a.width,height:a.height,zIndex:10,cursor:"pointer"})});var b=v,w=u.icon(-9999,9999,_,m),k=w.getBBox(),C=p.iconright||0,A=p.interval||0;w.remove(),b+=(k.width+C)*d.length+A*(d.length-1);var L=a.left+c[0],S=a.top+c[1]-2*x,T=L+(a.width-b)/2+x,E=S;if(i&&(E=E+4*x+a.height),"l"==e)T=0+c[0]+x;else if("r"==e){var I=n.width(r);T=I-b}var P=[],z=this.get("alignhook"),N=this.get("iconAttrHook"),R=this.get("spanAttrHook"),Y=[],X=this.get("anim"),F=X?n.width(r):0,D={icontype:m,iconsize:x,iconright:C};t.each(d,function(e,i){z&&(D=z.call(u,D,i));var a=T,o=E;a+=F;var c=u.icon(a,o,_,e.icontype||D.icontype),d=c.getBBox(),p={};t.mix(p,e,!0,["DEFAULT","HOVER"]);var g={fill:p.DEFAULT};N&&(g=t.merge({fill:p.DEFAULT},N.call(u,i))),g.stroke=g.fill,c.attr(g);var x=e.text||"data"+i,m=n.create('<span class="kcharts-legend-item"></span>');n.html(m,x);var v,y,b=s(m);m=t.Node('<span class="kcharts-legend-item">'+x+"</span>"),v=T+D.iconsize+D.iconright,y=E-(d.height/2+(b.height-d.height)/2),v+=F;var w={left:v+"px",top:y+"px",position:"absolute",zIndex:10,cursor:"pointer"};p.DEFAULT&&(w.color=p.DEFAULT),R&&(w=t.merge(w,R.call(u,i))),m.css(w),m.appendTo(r),T+=b.width+2*D.iconsize+A+D.iconright;var k={icon:c,des:m,index:i,disable:function(){h.call(k,u,e)},enable:function(){f.call(k,u,e)}};P.push(k),X&&Y.push({el:k,frame:l,from:{cx:0,left:v},to:{cx:-F,left:v-F}})}),this.set("els",P),X?(X.endframe=function(){u.onframeend()},o.AnimateObject(Y,X)):u.onframeend()},alignTopLeft:function(){this.alignTop("l")},alignTopCenter:function(){this.alignTop("c")},alignTopRight:function(){this.alignTop("r")},alignRight:function(t){this.alignLeft(t,!0)},alignRightTop:function(){this.alignRight("t")},alignRightMiddle:function(){this.alignRight("m")},alignRightBottom:function(){this.alignRight("b")},alignBottomLeft:function(){this.alignTop("l",!0)},alignBottomCenter:function(){this.alignTop("c",!0)},alignBottomRight:function(){this.alignTop("r",!0)},alignLeft:function(e,i){var r=this.get("container"),a=this.get("bbox"),l=this.get("offset"),d=(this.get("paper"),this.get("config")),p=this.get("globalConfig"),u=this,_=p.iconsize||[1,1],x=_*g||6,m=p.icontype,v=0,y=d[0],b=u.icon(-9999,-9999,_,m),w=b.getBBox(),k=d.length,C=p.iconright||0,A=p.interval;b.remove();var L=y.text||"data",S=t.Node('<span class="kcharts-legend-item">'+L+"</span>"),T=s(S),E=Math.max(T.height,w.height);v+=E*k+A*(k-1);var I,P,z,N,R=0,Y=[];t.each(d,function(e,i){var n=t.Node('<span class="kcharts-legend-item">'+e.text+"</span>"),r=s(n);e.text||"data"+i,r.width>R&&(R=r.width),Y.push({el:n,width:r.width,height:r.height})}),R+=C,i?(I=a.left+a.width+l[0],P=a.top+l[1],z=I+x,N=P):(I=a.left+l[0],P=a.top+l[1],z=I,N=P),"m"==e?N=a.top+(a.height-v)/2:"b"==e&&(N=a.top+a.height-v);var X=[],F=this.get("alignhook"),D=this.get("iconAttrHook"),G=this.get("spanAttrHook"),M=[],O=this.get("anim"),B=O?n.height(r):0,$={icontype:m,iconright:C};t.each(d,function(e,n){F&&($=F.call(u,$,n));var a,o;i?(a=z+l[0],o=N+l[1]):(a=z-R-x+l[0],o=N+l[1]),o+=B;var s=u.icon(a,o,_,e.icontype||$.icontype),d=s.getBBox(),p=Y[n],g={};t.mix(g,e,!0,["DEFAULT","HOVER"]);var m={fill:g.DEFAULT};D&&(m=t.merge(m,D.call(u,n))),m.stroke=m.fill,s.attr(m);var v,y,b=t.Node('<span class="kcharts-legend-item">'+e.text+"</span>");i?(v=z+x+d.width+l[0],y=N-(d.height/2+(T.height-d.height)/2)+l[1]):(v=z+l[0]-R+$.iconright,y=N-(d.height/2+(p.height-d.height)/2)+l[1]),y+=B;var w={left:v+"px",top:y+"px",position:"absolute",zIndex:10,cursor:"pointer"};g.DEFAULT&&(w.color=g.DEFAULT),G&&(w=t.merge(w,G.call(u,n))),b.css(w),b.appendTo(r);var k=Math.max(p.height,d.height);N+=k+A;var C={icon:s,des:b,index:n,disable:function(){h.call(C,u,e)},enable:function(){f.call(C,u,e)}};X.push(C),O&&M.push({el:C,frame:c,from:{cy:0,top:y},to:{cy:-B,top:y-B}})}),this.set("els",X),O?(O.endframe=function(){u.onframeend()},o.AnimateObject(M,O)):u.onframeend()},alignLeftTop:function(){this.alignLeft("t")},alignLeftMiddle:function(){this.alignLeft("m")},alignLeftBottom:function(){this.alignLeft("b")},destroy:function(){}};return e.extend?p=e.extend(v):(p=function(e){e=t.merge(m,e),this.set(e),this.initializer()},t.extend(p,e,v)),p},{requires:["base","node","dom","event","gallery/kcharts/1.3/icons/index","gallery/kcharts/1.3/animate/index","gallery/kcharts/1.3/raphael/index"]});
>>>>>>> 745e10f730e8ce1cd2f5c6f27c8eac4321282f32
