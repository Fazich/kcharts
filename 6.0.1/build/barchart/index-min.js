/*!build time : 2015-04-14 1:37:57 PM*/
KISSY.add("kg/kcharts/6.0.1/barchart/theme",function(a){var b={"ks-chart-default":{title:{content:"",css:{"text-align":"center","font-size":"16px","font-weight":"bold",color:"#666"},isShow:!0},subTitle:{content:"",css:{"text-align":"center","font-size":"12px",color:"#666"},isShow:!0},xGrids:{css:{color:"#eee"}},yGrids:{css:{color:"#eee"}},yAxis:{css:{color:"#ccc"}},xAxis:{css:{color:"#ccc"}},xLabels:{css:{color:"#666","font-size":"12px"}},yLabels:{css:{color:"#666","font-size":"12px"}}},"ks-chart-analytiks":{title:{content:"",css:{"text-align":"center","font-size":"16px","font-weight":"bold",color:"#666"},isShow:!0},subTitle:{content:"",css:{"text-align":"center","font-size":"12px",color:"#666"},isShow:!0},xGrids:{css:{color:"#eee"}},yGrids:{css:{color:"#eee"}},yAxis:{css:{color:"#ccc"}},xAxis:{css:{color:"#ccc"}},xLabels:{css:{color:"#666","font-size":"12px"}},yLabels:{css:{color:"#666","font-size":"12px"}}},"ks-chart-rainbow":{title:{content:"",css:{"text-align":"center","font-size":"16px","font-weight":"bold",color:"#666"},isShow:!0},subTitle:{content:"",css:{"text-align":"center","font-size":"12px",color:"#666"},isShow:!0},xGrids:{css:{color:"#eee"}},yGrids:{css:{color:"#eee"}},yAxis:{css:{color:"#ccc"}},xAxis:{css:{color:"#ccc"}},xLabels:{css:{color:"#666","font-size":"12px"}},yLabels:{css:{color:"#666","font-size":"12px"}}}};return b}),KISSY.add("kg/kcharts/6.0.1/barchart/cfg",function(a){var b="ks-chart-",c=b+"default",d="{COLOR}";return{themeCls:c,autoRender:!0,colors:[],stackable:!1,title:{content:"",css:{"text-align":"center","font-size":"16px"},isShow:!0},subTitle:{content:"",css:{"text-align":"center","font-size":"12px"},isShow:!0},xLabels:{isShow:!0,css:{color:"#666","font-size":"12px","white-space":"nowrap",position:"absolute"}},yLabels:{isShow:!0,css:{color:"#666","font-size":"12px","white-space":"nowrap",position:"absolute"}},xAxis:{isShow:!0,css:{color:"#eee",zIndex:10},min:0},yAxis:{isShow:!0,css:{zIndex:10},num:5,min:0},xGrids:{isShow:!0,css:{}},yGrids:{isShow:!0,css:{}},areas:{isShow:!0,css:{}},bars:{isShow:!0,attr:{fill:d,"stroke-width":"0"},barsRatio:.6,barRatio:.5},legend:{isShow:!1},tip:{isShow:!0,template:"",css:{},anim:{easing:"easeOut",duration:.3},offset:{x:0,y:0},boundryDetect:!0,alignX:"right",alignY:"bottom"}}}),KISSY.add("kg/kcharts/6.0.1/barchart/index",function(a,b,c,d,e,f,g,h,i,j,l,m,n,o){var p,q,r=a.all,s="ks-chart-",t=s+"default",u=t+"-canvas",v=s+"evtlayout",w=/\{COLOR\}/g,x={initializer:function(){this.init()},init:function(){var b=this;b.chartType="barchart";var c=a.clone(o);b._cfg=a.mix(c,b.userConfig,void 0,void 0,!0),e.prototype.init.call(b,b._cfg),b._cfg.autoRender&&b.render()},render:function(b){var c=this,d=c._cfg,i=c._innerContainer,k=d.themeCls;if(c._$ctnNode[0]){e.prototype.dataFormat.call(c,c._cfg),c._$ctnNode.html(""),c._bars={},c._finished=[],k=c._cfg.themeCls||o.themeCls,c._cfg=a.mix(a.clone(a.mix(o,j[k],void 0,void 0,!0)),c._cfg,void 0,void 0,!0),c.color=p=new g({themeCls:k}),c._cfg.colors.length>0&&p.removeAllColors();for(var l in c._cfg.colors)p.setColor(c._cfg.colors[l]);c.raphaelPaper=f(c._$ctnNode[0],d.width,d.height),c.paper=new h(c._$ctnNode,{clsName:u,width:i.width,height:i.height,left:i.tl.x,top:i.tl.y}),c._clonePoints=c._points,c.getBarsPos(),c.htmlPaper=new h(c._$ctnNode,{clsName:k}),e.Common.drawTitle.call(null,this,k),e.Common.drawSubTitle.call(null,this,k),c.renderEvtLayout(),c.renderTip(),e.Common.drawGridsX.call(null,this),e.Common.drawGridsY.call(null,this),e.Common.drawAxisX.call(null,this),e.Common.drawAxisY.call(null,this),e.Common.drawLabelsX.call(null,this),e.Common.drawLabelsY.call(null,this),c.renderLegend(),c.drawBars(function(){c.afterRender(),c.fix2Resize()}),c.bindEvt(),a.log(c)}},drawBar:function(b,c,d){var f,g=this,h=g._cfg,i=g.getRaphaelPaper(),j=(g._innerContainer,g.color.getColor(b).DEFAULT),k=g.processAttr(h.bars.attr,j),l="x"==h.zoomType?!1:!0,m=g._barsPos[b][c],n=Math.round(m.x-0),o=Math.round(m.y-0),p=Math.round(m.width-0),q=Math.round(m.height-0);if(q>=0&&1>=q&&(q=1),h.anim){var r=h.anim.duration&&a.isNumber(h.anim.duration)?h.anim.duration:500,s=h.anim.easing?h.anim.easing:"easeOut";if(l){var t=e.prototype.data2GrapicData.call(g,0,!0,!1);f=i.rect(t,o,0,q).attr(k).animate({width:p,x:n},r,s,function(){d&&d()})}else{var u=e.prototype.data2GrapicData.call(g,0,!1,!0);f=i.rect(n,u,p,0).attr(k).animate({height:q,y:o},r,s,function(){d&&d()})}}else f=i.rect(n,o,p,q).attr(k),d&&d();return f},getBarsPos:function(){var a=this,b=a._cfg.zoomType,c=a._cfg.stackable,d="y"==b,f=a.getInnerContainer(),g=c?1:e.prototype.obj2Array(a._clonePoints).length,h=a._cfg.bars.barsRatio,i=a._cfg.bars.barRatio,j=d?a._pointsY.length>1?a._pointsY[1].y-a._pointsY[0].y:f.height:a._pointsX.length>1?a._pointsX[1].x-a._pointsX[0].x:f.width,l=j*h,m=i>=1?0:(1-i)/i,n=l/(g+(g-1)*m),o=n*(1-i)/i,p=c?0:n+o,q=(a._innerContainer.bl.y,a._innerContainer.bl.x),r=(j*(1-h)-j)/2,s=[];a._barsPos={};for(var t in a._points){var u=[];if(d){var v=e.prototype.data2GrapicData.call(a,0,!0,!1);for(var w in a._points[t]){var x={},y=a._points[t][w].x,z=Math.abs(y-v);x.y=r+a._points[t][w].y,c?(x.x=q+(s[w]||0),s[w]=s[w]?s[w]+z:z):x.x=y>v?y-z:v-z,x.width=z,x.height=n,u.push(x)}}else{var A=e.prototype.data2GrapicData.call(a,0,!1,!0);for(var w in a._points[t]){var x={},B=a._points[t][w].y,C=Math.abs(A-B);x.x=r+a._points[t][w].x,c?(x.y=B-(s[w]||0),s[w]=s[w]?s[w]+C:C):x.y=B>A?A:B,x.width=n,x.height=C,u.push(x)}}r+=p;for(var w in u)for(k in u[w])u[w][k]=Math.ceil(u[w][k]);a._barsPos[t]=u}},drawBars:function(a){{var b=this;b._cfg}for(var c in b._barsPos){var d=[],e=[];for(var f in b._barsPos[c]){var g=b._barsPos[c][f];e[f]=g,d[f]=b.drawBar(c,f,function(){b._finished.push(!0),a&&b._finished.length==b._cfg.series.length&&a()}).attr({barGroup:c,barIndex:f,defaultColor:p.getColor(c).DEFAULT,hoverColor:p.getColor(c).HOVER})}var h={bars:d,posInfos:e,color:p.getColor(c),isShow:!0};b._bars[c]=h}return b._bars},renderTip:function(){if(this._cfg.tip.isShow){var b=this,c=b._cfg,d=b._innerContainer,e=c.tip.boundryDetect?{x:d.tl.x,y:d.tl.y,width:d.width,height:d.height}:{},f=a.mix(c.tip,{rootNode:b._$ctnNode,clsName:c.themeCls,boundry:e});return b.tip=new m(f),b.tip}},renderEvtLayout:function(){{var a,b=this,c=b._innerContainer,d=(c.tl.y,b._points[0],c.height);b._multiple,b._evtEls._bars=[]}return a=b._evtEls.paper?b._evtEls.paper:b._evtEls.paper=new h(b._$ctnNode,{clsName:v,prependTo:!1,width:c.width,height:d,left:c.tl.x,top:c.tl.y,css:{"z-index":20,background:"#fff",filter:"alpha(opacity =1)","-moz-opacity":.01,"-khtml-opacity":.01,opacity:.01}}),b._evtEls._bars=b._barsPos,a},delegateMouseMove:function(a){{var b=this,c=b.getInnerContainer();b.curBarIndex}for(var d in b._evtEls._bars)for(var e in b._evtEls._bars[d]){var f=b._evtEls._bars[d][e];if(b.isInSide(a.offsetX+c.x,a.offsetY+c.y,f.x,f.y,f.width,f.height)){if(b.curBarIndex===e&&b.curGroupIndex===d)return;return b.curBarIndex=e,b.curGroupIndex=d,void b.tipHandler(b.curGroupIndex,b.curBarIndex)}}},clearEvtLayout:function(){var a=this;a._evtEls._bars&&a._evtEls._bars.length&&(a._evtEls._bars=[])},renderLegend:function(){if(this._cfg.legend.isShow){var b=this,c=b._cfg.legend,d=c.container&&r(c.container)[0]?r(c.container):b._$ctnNode,e=b._innerContainer,f=b.color._colors,g=f.length,h=b._cfg,j=b._cfg.series,k=a.map(j,function(a,b){b%=g;var c={},d=f[b];return c.text=a.text,c.DEFAULT=d.DEFAULT,c.HOVER=d.HOVER,c}),l=a.merge({interval:20,iconright:5,showicon:!0},h.legend.globalConfig);return b.legend=new i({container:d,bbox:{width:e.width,height:e.height,left:e.x,top:e.y},align:h.legend.align||"bc",offset:h.legend.offset||(/t/g.test(h.legend.align)?[0,0]:[0,20]),globalConfig:l,config:k}),b.legend.on("click",function(a){var b=a.index,c=(a.text,a.icon,a.el);1!=c.hide?(this.hideBar(b),c.hide=1,c.disable()):(this.showBar(b),c.hide=0,c.enable())},this),b.legend}},bindEvt:function(){var a=this,b=(a._cfg,a._evtEls);a.curGroupIndex=a.getFirstVisibleBarGroupIndex(),a.curBarIndex=a.getFirstNotEmptyBarIndex(a.curGroupIndex),n.detach(b.paper.$paper,"mousemove"),n.on(b.paper.$paper,"mousemove",function(b){b=a.getOffset(b),a.delegateMouseMove(b)}),n.detach(a._evtEls.paper.$paper,"mouseleave"),n.on(a._evtEls.paper.$paper,"mouseleave",function(b){a.tip&&a.tip.hide(),a.paperLeave(),a.curBarIndex=void 0})},isEmptyPoint:function(a){return a&&a.dataInfo?!1:!0},paperLeave:function(){var a=this;a.fire("paperLeave",a)},barChange:function(b,c){var d=this,e=d._bars[b],f=a.mix({target:e.bars[c],currentTarget:e.bars[c],barGroup:Math.round(b),barIndex:Math.round(c)},d._points[b][c]);d.curBarIndex=c,d.curGroupIndex=b,d.fire("barChange",f)},delegateClick:function(a){var b=this,c=b.getInnerContainer();for(var d in b._evtEls._bars)for(var e in b._evtEls._bars[d]){var f=b._evtEls._bars[d][e];if(b.isInSide(a.offsetX+c.x,a.offsetY+c.y,f.x,f.y,f.width,f.height))return void b.barClick(d,e)}},barClick:function(b,c){var d=this,e=d._bars[b],f=a.mix({target:e.bars[c],currentTarget:e.bars[c],barGroup:Math.round(b),barIndex:Math.round(c)},d._points[b][c]);d.fire("barClick",f)},tipHandler:function(b,c){var d=this,e=d._cfg,f=d.tip,g="y"==e.zoomType?!0:!1,h=d._bars[b].bars[c],i=h.attr("defaultColor"),j=d._cfg.tip.template,k=g?h.attr("x")/1+h.attr("width")/1:h.attr("x"),l=h.attr("y"),m=a.merge(d._points[b][c].dataInfo,e.series[b]);delete m.data,d._points[b][c].dataInfo,d.barChange(b,c),j&&(a.mix(m,{groupindex:b,barindex:c}),f&&f.fire("setcontent",{data:m}),f&&f.fire("move",{x:k,y:l,style:d.processAttr(e.tip.css,i)}))},processAttr:function(b,c){var d=a.clone(b);for(var e in d)d[e]&&"string"==typeof d[e]&&(d[e]=d[e].replace(w,c));return d},getFirstVisibleBarGroupIndex:function(){var a=this;for(var b in a._bars)if(a._bars[b].isShow)return b},getFirstNotEmptyBarIndex:function(a){var b=this;for(var c in b._points)if(!b.isEmptyPoint(b._points[c][a])&&b._bars[c].isShow)return c+"";return""},fix2Resize:function(){{var b=this;b._$ctnNode}b._cfg.anim="";var c=a.buffer(function(){b.render()},200);!b.__isFix2Resize&&b.on("resize",function(){b.__isFix2Resize=1,c()})},showBar:function(b){{var c=this;c._innerContainer}c._bars[b].isShow=!0,e.prototype.recoveryData.call(c,b),c._clonePoints[b]=c._points[b],e.Common.animateGridsAndLabels.call(null,c),c.getBarsPos();for(var d in c._bars)if(d!=b)for(var f in c._bars[d].bars)if(c._barsPos[d]){var g=c._barsPos[d][f];g&&c._bars[d].bars[f].stop().animate({height:g.height,width:g.width,y:g.y,x:g.x},400,"easeOut",function(){}),c._bars[d].bars[f].attr({posx:g.x,posy:g.y})}var h=[],i=[];for(var f in c._barsPos[b]){var g=c._barsPos[b][f];h[f]=g,i[f]=c.drawBar(b,f).attr({barGroup:b,barIndex:f,defaultColor:p.getColor(b).DEFAULT,hoverColor:p.getColor(b).HOVER})}c._bars[b]={bars:i,posInfos:h,color:p.getColor(d)},c.clearEvtLayout(),c.renderEvtLayout(),c.bindEvt(),a.log(c)},hideBar:function(b){{var c=this;c._innerContainer}c._bars[b].isShow=!1,e.prototype.removeData.call(c,b),delete c._clonePoints[b],e.Common.animateGridsAndLabels.call(null,c),c.getBarsPos();for(var d in c._bars[b].bars)c._bars[b].bars[d].remove();for(var d in c._bars)if(d!=b)for(var f in c._bars[d].bars){var g=c._barsPos[d]?c._barsPos[d][f]:"";g&&c._bars[d].bars[f].stop().animate({height:g.height,width:g.width,y:g.y,x:g.x},400,"easeOut",function(){}),c._bars[d].bars[f].attr({posx:g.x,posy:g.y})}c.clearEvtLayout(),c.renderEvtLayout(),c.bindEvt(),a.log(c)},afterRender:function(){var a=this;a.fire("afterRender",a)},getHtmlPaper:function(){return this.paper},getRaphaelPaper:function(){return this.raphaelPaper},clear:function(){this._$ctnNode.html("")}};return c.extend?q=e.extend(x):(q=function(a){var b=this;b.userConfig=a,b.init()},a.extend(q,e,x)),q},{requires:["node","base","kg/kcharts/6.0.1/template/index","kg/kcharts/6.0.1/basechart/index","kg/kcharts/6.0.1/raphael/index","kg/kcharts/6.0.1/tools/color/index","kg/kcharts/6.0.1/tools/htmlpaper/index","kg/kcharts/6.0.1/legend/index","./theme","kg/kcharts/6.0.1/tools/touch/index","kg/kcharts/6.0.1/tip/index","event","./cfg"]});